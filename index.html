<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academia de Informática - Sistema de Gestión</title>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2c3e50;
            --success: #2ecc71;
            --danger: #e74c3c;
            --warning: #f39c12;
            --light: #ecf0f1;
            --dark: #34495e;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--secondary), var(--primary));
            color: white;
            padding: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .logo i {
            font-size: 2rem;
        }
        
        .logo h1 {
            font-size: 1.8rem;
        }
        
        .tabs {
            display: flex;
            background-color: white;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .tab {
            padding: 15px 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-align: center;
            flex: 1;
        }
        
        .tab:hover {
            background-color: #f8f9fa;
        }
        
        .tab.active {
            background-color: var(--primary);
            color: white;
        }
        
        .tab-content {
            display: none;
            background-color: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--secondary);
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary {
            background-color: var(--primary);
            color: white;
        }
        
        .btn-primary:hover {
            background-color: #2980b9;
        }
        
        .btn-success {
            background-color: var(--success);
            color: white;
        }
        
        .btn-success:hover {
            background-color: #27ae60;
        }
        
        .btn-danger {
            background-color: var(--danger);
            color: white;
        }
        
        .btn-danger:hover {
            background-color: #c0392b;
        }
        
        .btn-warning {
            background-color: var(--warning);
            color: white;
        }
        
        .btn-warning:hover {
            background-color: #d35400;
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }
        
        .card-title {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--secondary);
        }
        
        .table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .table th, .table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }
        
        .table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--secondary);
        }
        
        .table tr:hover {
            background-color: #f8f9fa;
        }
        
        .status-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .status-paid {
            background-color: rgba(46, 204, 113, 0.2);
            color: var(--success);
        }
        
        .status-pending {
            background-color: rgba(243, 156, 18, 0.2);
            color: var(--warning);
        }
        
        .status-overdue {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }
        
        .payment-type-badge {
            padding: 5px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .payment-type-inscripcion {
            background-color: rgba(52, 152, 219, 0.2);
            color: var(--primary);
        }
        
        .payment-type-mensualidad {
            background-color: rgba(155, 89, 182, 0.2);
            color: #9b59b6;
        }
        
        .payment-type-materiales {
            background-color: rgba(241, 196, 15, 0.2);
            color: #f1c40f;
        }
        
        .payment-type-otros {
            background-color: rgba(149, 165, 166, 0.2);
            color: #95a5a6;
        }
        
        .photo-container {
            width: 120px;
            height: 120px;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: #f8f9fa;
            margin-bottom: 15px;
        }
        
        .photo-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .photo-placeholder {
            color: #aaa;
            text-align: center;
            padding: 10px;
        }
        
        .actions {
            display: flex;
            gap: 8px;
        }
        
        .alert {
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: none;
        }
        
        .alert-success {
            background-color: rgba(46, 204, 113, 0.2);
            border: 1px solid var(--success);
            color: var(--success);
        }
        
        .alert-danger {
            background-color: rgba(231, 76, 60, 0.2);
            border: 1px solid var(--danger);
            color: var(--danger);
        }
        
        .search-container {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .search-container input {
            flex: 1;
        }
        
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .summary-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            text-align: center;
            border-top: 4px solid var(--primary);
        }
        
        .summary-card.paid {
            border-top-color: var(--success);
        }
        
        .summary-card.pending {
            border-top-color: var(--warning);
        }
        
        .summary-card.overdue {
            border-top-color: var(--danger);
        }
        
        .summary-card.total {
            border-top-color: var(--primary);
        }
        
        .summary-card-value {
            font-size: 2rem;
            font-weight: 700;
            margin: 10px 0;
        }
        
        .summary-card-title {
            font-size: 1rem;
            color: var(--secondary);
            font-weight: 600;
        }
        
        .payment-totals {
            background-color: #f8f9fa;
            border-radius: 8px;
            padding: 20px;
            margin-top: 20px;
        }
        
        .payment-totals h3 {
            margin-bottom: 15px;
            color: var(--secondary);
        }
        
        .totals-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }
        
        .total-item {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .total-item:last-child {
            border-bottom: none;
            font-weight: 700;
            font-size: 1.1rem;
        }
        
        .payment-filters {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .payment-filters .form-group {
            margin-bottom: 0;
            min-width: 180px;
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .header-content {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .table {
                display: block;
                overflow-x: auto;
            }
            
            .summary-cards {
                grid-template-columns: 1fr;
            }
            
            .payment-filters {
                flex-direction: column;
            }
            
            .payment-filters .form-group {
                min-width: 100%;
            }
        }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-laptop-code"></i>
                    <h1>Academia de Informática</h1>
                </div>
                <div class="user-info">
                    <span id="current-date"></span>
                </div>
            </div>
        </div>
    </header>
    
    <div class="container">
        <div class="tabs">
            <div class="tab active" data-tab="students">Alumnos</div>
            <div class="tab" data-tab="payments">Pagos</div>
            <div class="tab" data-tab="instructors">Instructores</div>
            <div class="tab" data-tab="reports">Reportes</div>
        </div>
        
        <!-- Alerta de éxito -->
        <div class="alert alert-success" id="success-alert">
            <i class="fas fa-check-circle"></i> <span id="success-message">Operación realizada con éxito</span>
        </div>
        
        <!-- Alerta de error -->
        <div class="alert alert-danger" id="error-alert">
            <i class="fas fa-exclamation-circle"></i> <span id="error-message">Ha ocurrido un error</span>
        </div>
        
        <!-- Pestaña de Alumnos -->
        <div class="tab-content active" id="students-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Gestión de Alumnos</h2>
                    <button class="btn btn-primary" id="new-student-btn">
                        <i class="fas fa-plus"></i> Nuevo Alumno
                    </button>
                </div>
                
                <div class="search-container">
                    <input type="text" id="student-search" placeholder="Buscar alumno por nombre, email o teléfono...">
                    <button class="btn btn-primary" id="student-search-btn">
                        <i class="fas fa-search"></i> Buscar
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="table" id="students-table">
                        <thead>
                            <tr>
                                <th>Foto</th>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>Teléfono</th>
                                <th>Curso</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="students-table-body">
                            <!-- Los datos se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Formulario de Alumno -->
            <div class="card" id="student-form-container" style="display: none;">
                <div class="card-header">
                    <h2 class="card-title" id="student-form-title">Nuevo Alumno</h2>
                    <button class="btn btn-danger" id="cancel-student-btn">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
                
                <form id="student-form">
                    <input type="hidden" id="student-id">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="student-photo">Foto del Alumno</label>
                            <div class="photo-container">
                                <div class="photo-placeholder" id="student-photo-placeholder">
                                    <i class="fas fa-user fa-2x"></i>
                                    <p>Sin foto</p>
                                </div>
                                <img id="student-photo-preview" class="photo-preview" style="display: none;">
                            </div>
                            <input type="file" id="student-photo" accept="image/*">
                        </div>
                        
                        <div class="form-group" style="flex: 2;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="student-name">Nombre *</label>
                                    <input type="text" id="student-name" required>
                                </div>
                                <div class="form-group">
                                    <label for="student-lastname">Apellido *</label>
                                    <input type="text" id="student-lastname" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="student-email">Email *</label>
                                    <input type="email" id="student-email" required>
                                </div>
                                <div class="form-group">
                                    <label for="student-phone">Teléfono</label>
                                    <input type="text" id="student-phone">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="student-course">Curso *</label>
                                    <select id="student-course" required>
                                        <option value="">Seleccione un curso</option>
                                        <option value="Programación Básica">Programación Básica</option>
                                        <option value="Desarrollo Web">Desarrollo Web</option>
                                        <option value="Base de Datos">Base de Datos</option>
                                        <option value="Python Avanzado">Python Avanzado</option>
                                        <option value="JavaScript Moderno">JavaScript Moderno</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="student-status">Estado *</label>
                                    <select id="student-status" required>
                                        <option value="Activo">Activo</option>
                                        <option value="Inactivo">Inactivo</option>
                                        <option value="Graduado">Graduado</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="student-address">Dirección</label>
                            <textarea id="student-address" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="student-enrollment-date">Fecha de Inscripción</label>
                            <input type="date" id="student-enrollment-date">
                        </div>
                        <div class="form-group">
                            <label for="student-birthdate">Fecha de Nacimiento</label>
                            <input type="date" id="student-birthdate">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-save"></i> Guardar Alumno
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Pestaña de Pagos -->
        <div class="tab-content" id="payments-tab">
            <!-- Tarjetas de resumen -->
            <div class="summary-cards">
                <div class="summary-card total">
                    <div class="summary-card-title">TOTAL GENERAL</div>
                    <div class="summary-card-value" id="total-general">$0.00</div>
                    <div class="summary-card-subtitle">Suma de todos los pagos</div>
                </div>
                <div class="summary-card paid">
                    <div class="summary-card-title">PAGADOS</div>
                    <div class="summary-card-value" id="total-paid">$0.00</div>
                    <div class="summary-card-subtitle">Pagos completados</div>
                </div>
                <div class="summary-card pending">
                    <div class="summary-card-title">PENDIENTES</div>
                    <div class="summary-card-value" id="total-pending">$0.00</div>
                    <div class="summary-card-subtitle">Pagos por realizar</div>
                </div>
                <div class="summary-card overdue">
                    <div class="summary-card-title">VENCIDOS</div>
                    <div class="summary-card-value" id="total-overdue">$0.00</div>
                    <div class="summary-card-subtitle">Pagos con fecha vencida</div>
                </div>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Gestión de Pagos</h2>
                    <button class="btn btn-primary" id="new-payment-btn">
                        <i class="fas fa-plus"></i> Nuevo Pago
                    </button>
                </div>
                
                <!-- Filtros de pagos -->
                <div class="payment-filters">
                    <div class="form-group">
                        <label for="filter-month">Filtrar por Mes</label>
                        <select id="filter-month">
                            <option value="">Todos los meses</option>
                            <option value="1">Enero</option>
                            <option value="2">Febrero</option>
                            <option value="3">Marzo</option>
                            <option value="4">Abril</option>
                            <option value="5">Mayo</option>
                            <option value="6">Junio</option>
                            <option value="7">Julio</option>
                            <option value="8">Agosto</option>
                            <option value="9">Septiembre</option>
                            <option value="10">Octubre</option>
                            <option value="11">Noviembre</option>
                            <option value="12">Diciembre</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filter-type">Filtrar por Tipo</label>
                        <select id="filter-type">
                            <option value="">Todos los tipos</option>
                            <option value="Inscripción">Inscripción</option>
                            <option value="Mensualidad">Mensualidad</option>
                            <option value="Materiales">Materiales</option>
                            <option value="Otros">Otros</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="filter-status">Filtrar por Estado</label>
                        <select id="filter-status">
                            <option value="">Todos los estados</option>
                            <option value="Pagado">Pagado</option>
                            <option value="Pendiente">Pendiente</option>
                            <option value="Vencido">Vencido</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary" id="apply-filters-btn">
                            <i class="fas fa-filter"></i> Aplicar Filtros
                        </button>
                    </div>
                </div>
                
                <div class="search-container">
                    <input type="text" id="payment-search" placeholder="Buscar pago por alumno o concepto...">
                    <button class="btn btn-primary" id="payment-search-btn">
                        <i class="fas fa-search"></i> Buscar
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="table" id="payments-table">
                        <thead>
                            <tr>
                                <th>Alumno</th>
                                <th>Tipo</th>
                                <th>Concepto</th>
                                <th>Mes</th>
                                <th>Monto</th>
                                <th>Fecha</th>
                                <th>Vencimiento</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="payments-table-body">
                            <!-- Los datos se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
                
                <!-- Totales de pagos -->
                <div class="payment-totals">
                    <h3>Resumen de Pagos</h3>
                    <div class="totals-grid">
                        <div class="total-item">
                            <span>Total Pagados:</span>
                            <span id="summary-paid">$0.00</span>
                        </div>
                        <div class="total-item">
                            <span>Total Pendientes:</span>
                            <span id="summary-pending">$0.00</span>
                        </div>
                        <div class="total-item">
                            <span>Total Vencidos:</span>
                            <span id="summary-overdue">$0.00</span>
                        </div>
                        <div class="total-item">
                            <span>Total General:</span>
                            <span id="summary-total">$0.00</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Formulario de Pago -->
            <div class="card" id="payment-form-container" style="display: none;">
                <div class="card-header">
                    <h2 class="card-title" id="payment-form-title">Nuevo Pago</h2>
                    <button class="btn btn-danger" id="cancel-payment-btn">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
                
                <form id="payment-form">
                    <input type="hidden" id="payment-id">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="payment-student">Alumno *</label>
                            <select id="payment-student" required>
                                <option value="">Seleccione un alumno</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="payment-type">Tipo de Pago *</label>
                            <select id="payment-type" required>
                                <option value="">Seleccione tipo</option>
                                <option value="Inscripción">Inscripción</option>
                                <option value="Mensualidad">Mensualidad</option>
                                <option value="Materiales">Materiales</option>
                                <option value="Otros">Otros</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="payment-concept">Concepto *</label>
                            <input type="text" id="payment-concept" required>
                        </div>
                        <div class="form-group">
                            <label for="payment-month">Mes</label>
                            <select id="payment-month">
                                <option value="">No aplica</option>
                                <option value="1">Enero</option>
                                <option value="2">Febrero</option>
                                <option value="3">Marzo</option>
                                <option value="4">Abril</option>
                                <option value="5">Mayo</option>
                                <option value="6">Junio</option>
                                <option value="7">Julio</option>
                                <option value="8">Agosto</option>
                                <option value="9">Septiembre</option>
                                <option value="10">Octubre</option>
                                <option value="11">Noviembre</option>
                                <option value="12">Diciembre</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="payment-amount">Monto *</label>
                            <input type="number" id="payment-amount" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="payment-date">Fecha *</label>
                            <input type="date" id="payment-date" required>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="payment-status">Estado *</label>
                            <select id="payment-status" required>
                                <option value="Pagado">Pagado</option>
                                <option value="Pendiente">Pendiente</option>
                                <option value="Vencido">Vencido</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="payment-due-date">Fecha de Vencimiento</label>
                            <input type="date" id="payment-due-date">
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="payment-notes">Notas</label>
                            <textarea id="payment-notes" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-save"></i> Guardar Pago
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Pestaña de Instructores -->
        <div class="tab-content" id="instructors-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Gestión de Instructores</h2>
                    <button class="btn btn-primary" id="new-instructor-btn">
                        <i class="fas fa-plus"></i> Nuevo Instructor
                    </button>
                </div>
                
                <div class="search-container">
                    <input type="text" id="instructor-search" placeholder="Buscar instructor por nombre, email o especialidad...">
                    <button class="btn btn-primary" id="instructor-search-btn">
                        <i class="fas fa-search"></i> Buscar
                    </button>
                </div>
                
                <div class="table-container">
                    <table class="table" id="instructors-table">
                        <thead>
                            <tr>
                                <th>Foto</th>
                                <th>Nombre</th>
                                <th>Email</th>
                                <th>Especialidad</th>
                                <th>Estado</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody id="instructors-table-body">
                            <!-- Los datos se cargarán dinámicamente -->
                        </tbody>
                    </table>
                </div>
            </div>
            
            <!-- Formulario de Instructor -->
            <div class="card" id="instructor-form-container" style="display: none;">
                <div class="card-header">
                    <h2 class="card-title" id="instructor-form-title">Nuevo Instructor</h2>
                    <button class="btn btn-danger" id="cancel-instructor-btn">
                        <i class="fas fa-times"></i> Cancelar
                    </button>
                </div>
                
                <form id="instructor-form">
                    <input type="hidden" id="instructor-id">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="instructor-photo">Foto del Instructor</label>
                            <div class="photo-container">
                                <div class="photo-placeholder" id="instructor-photo-placeholder">
                                    <i class="fas fa-user-tie fa-2x"></i>
                                    <p>Sin foto</p>
                                </div>
                                <img id="instructor-photo-preview" class="photo-preview" style="display: none;">
                            </div>
                            <input type="file" id="instructor-photo" accept="image/*">
                        </div>
                        
                        <div class="form-group" style="flex: 2;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="instructor-name">Nombre *</label>
                                    <input type="text" id="instructor-name" required>
                                </div>
                                <div class="form-group">
                                    <label for="instructor-lastname">Apellido *</label>
                                    <input type="text" id="instructor-lastname" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="instructor-email">Email *</label>
                                    <input type="email" id="instructor-email" required>
                                </div>
                                <div class="form-group">
                                    <label for="instructor-phone">Teléfono</label>
                                    <input type="text" id="instructor-phone">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="instructor-specialty">Especialidad *</label>
                                    <input type="text" id="instructor-specialty" required>
                                </div>
                                <div class="form-group">
                                    <label for="instructor-status">Estado *</label>
                                    <select id="instructor-status" required>
                                        <option value="Activo">Activo</option>
                                        <option value="Inactivo">Inactivo</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="instructor-bio">Biografía</label>
                            <textarea id="instructor-bio" rows="3"></textarea>
                        </div>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <button type="submit" class="btn btn-success">
                                <i class="fas fa-save"></i> Guardar Instructor
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        
        <!-- Pestaña de Reportes -->
        <div class="tab-content" id="reports-tab">
            <div class="card">
                <div class="card-header">
                    <h2 class="card-title">Reportes y Estadísticas</h2>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="report-type">Tipo de Reporte</label>
                        <select id="report-type">
                            <option value="students">Reporte de Alumnos</option>
                            <option value="payments">Reporte de Pagos</option>
                            <option value="instructors">Reporte de Instructores</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="report-period">Período</label>
                        <select id="report-period">
                            <option value="all">Todos los registros</option>
                            <option value="month">Este mes</option>
                            <option value="quarter">Este trimestre</option>
                            <option value="year">Este año</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label>&nbsp;</label>
                        <button class="btn btn-primary" id="generate-report-btn">
                            <i class="fas fa-chart-bar"></i> Generar Reporte
                        </button>
                    </div>
                </div>
                
                <div id="report-results">
                    <!-- Los resultados del reporte se mostrarán aquí -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Datos de ejemplo para inicializar la aplicación
        const initialData = {
            students: [
                {
                    id: 1,
                    name: "Juan",
                    lastname: "Pérez",
                    email: "juan.perez@email.com",
                    phone: "123-456-7890",
                    course: "Programación Básica",
                    status: "Activo",
                    address: "Calle Falsa 123",
                    enrollmentDate: "2023-01-15",
                    birthdate: "2000-05-20",
                    photo: null
                },
                {
                    id: 2,
                    name: "María",
                    lastname: "González",
                    email: "maria.gonzalez@email.com",
                    phone: "098-765-4321",
                    course: "Desarrollo Web",
                    status: "Activo",
                    address: "Avenida Siempre Viva 456",
                    enrollmentDate: "2023-02-10",
                    birthdate: "1999-08-12",
                    photo: null
                }
            ],
            payments: [
                {
                    id: 1,
                    studentId: 1,
                    type: "Inscripción",
                    concept: "Matrícula Curso Programación",
                    amount: 150.00,
                    date: "2023-01-15",
                    status: "Pagado",
                    dueDate: "2023-01-15",
                    month: "",
                    notes: "Pago completo"
                },
                {
                    id: 2,
                    studentId: 2,
                    type: "Inscripción",
                    concept: "Matrícula Curso Desarrollo Web",
                    amount: 150.00,
                    date: "2023-02-10",
                    status: "Pagado",
                    dueDate: "2023-02-10",
                    month: "",
                    notes: "Pago completo"
                },
                {
                    id: 3,
                    studentId: 1,
                    type: "Mensualidad",
                    concept: "Mensualidad Febrero",
                    amount: 100.00,
                    date: "2023-02-01",
                    status: "Pendiente",
                    dueDate: "2023-02-15",
                    month: "2",
                    notes: "Recordar enviar recordatorio"
                },
                {
                    id: 4,
                    studentId: 2,
                    type: "Mensualidad",
                    concept: "Mensualidad Marzo",
                    amount: 120.00,
                    date: "2023-03-01",
                    status: "Vencido",
                    dueDate: "2023-03-05",
                    month: "3",
                    notes: "Pago atrasado"
                },
                {
                    id: 5,
                    studentId: 1,
                    type: "Materiales",
                    concept: "Kit de Programación",
                    amount: 50.00,
                    date: "2023-01-20",
                    status: "Pagado",
                    dueDate: "2023-01-20",
                    month: "",
                    notes: "Materiales entregados"
                }
            ],
            instructors: [
                {
                    id: 1,
                    name: "Carlos",
                    lastname: "Rodríguez",
                    email: "carlos.rodriguez@academia.com",
                    phone: "111-222-3333",
                    specialty: "Programación",
                    status: "Activo",
                    bio: "Ingeniero en Sistemas con 10 años de experiencia",
                    photo: null
                },
                {
                    id: 2,
                    name: "Ana",
                    lastname: "Martínez",
                    email: "ana.martinez@academia.com",
                    phone: "444-555-6666",
                    specialty: "Desarrollo Web",
                    status: "Activo",
                    bio: "Desarrolladora Full Stack con experiencia en React y Node.js",
                    photo: null
                }
            ]
        };

        // Inicialización de la aplicación
        document.addEventListener('DOMContentLoaded', function() {
            // Establecer la fecha actual
            const currentDate = new Date().toLocaleDateString('es-ES', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('current-date').textContent = currentDate;
            
            // Cargar datos desde localStorage o inicializar con datos de ejemplo
            loadData();
            
            // Configurar eventos de las pestañas
            setupTabs();
            
            // Configurar eventos de los formularios
            setupForms();
            
            // Configurar eventos de los botones
            setupButtons();
            
            // Cargar datos iniciales en las tablas
            loadStudentsTable();
            loadPaymentsTable();
            loadInstructorsTable();
            
            // Calcular y mostrar totales de pagos
            updatePaymentTotals();
        });

        // Cargar datos desde localStorage o inicializar con datos de ejemplo
        function loadData() {
            if (!localStorage.getItem('academyData')) {
                localStorage.setItem('academyData', JSON.stringify(initialData));
            }
        }

        // Obtener datos desde localStorage
        function getData() {
            return JSON.parse(localStorage.getItem('academyData'));
        }

        // Guardar datos en localStorage
        function saveData(data) {
            localStorage.setItem('academyData', JSON.stringify(data));
        }

        // Configurar eventos de las pestañas
        function setupTabs() {
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remover clase active de todas las pestañas y contenidos
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    // Agregar clase active a la pestaña clickeada
                    this.classList.add('active');
                    
                    // Mostrar el contenido correspondiente
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(`${tabId}-tab`).classList.add('active');
                    
                    // Si es la pestaña de pagos, actualizar los totales
                    if (tabId === 'payments') {
                        updatePaymentTotals();
                    }
                });
            });
        }

        // Configurar eventos de los formularios
        function setupForms() {
            // Formulario de alumnos
            document.getElementById('student-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveStudent();
            });
            
            // Formulario de pagos
            document.getElementById('payment-form').addEventListener('submit', function(e) {
                e.preventDefault();
                savePayment();
            });
            
            // Formulario de instructores
            document.getElementById('instructor-form').addEventListener('submit', function(e) {
                e.preventDefault();
                saveInstructor();
            });
            
            // Previsualización de fotos
            document.getElementById('student-photo').addEventListener('change', function(e) {
                previewPhoto(this, 'student-photo-preview', 'student-photo-placeholder');
            });
            
            document.getElementById('instructor-photo').addEventListener('change', function(e) {
                previewPhoto(this, 'instructor-photo-preview', 'instructor-photo-placeholder');
            });
        }

        // Configurar eventos de los botones
        function setupButtons() {
            // Botones de alumnos
            document.getElementById('new-student-btn').addEventListener('click', function() {
                showStudentForm();
            });
            
            document.getElementById('cancel-student-btn').addEventListener('click', function() {
                hideStudentForm();
            });
            
            // Botones de pagos
            document.getElementById('new-payment-btn').addEventListener('click', function() {
                showPaymentForm();
            });
            
            document.getElementById('cancel-payment-btn').addEventListener('click', function() {
                hidePaymentForm();
            });
            
            // Botones de instructores
            document.getElementById('new-instructor-btn').addEventListener('click', function() {
                showInstructorForm();
            });
            
            document.getElementById('cancel-instructor-btn').addEventListener('click', function() {
                hideInstructorForm();
            });
            
            // Botón de generar reporte
            document.getElementById('generate-report-btn').addEventListener('click', function() {
                generateReport();
            });
            
            // Botones de búsqueda
            document.getElementById('student-search-btn').addEventListener('click', function() {
                searchStudents();
            });
            
            document.getElementById('payment-search-btn').addEventListener('click', function() {
                searchPayments();
            });
            
            document.getElementById('instructor-search-btn').addEventListener('click', function() {
                searchInstructors();
            });
            
            // Botón de aplicar filtros
            document.getElementById('apply-filters-btn').addEventListener('click', function() {
                applyPaymentFilters();
            });
        }

        // Previsualizar foto seleccionada
        function previewPhoto(input, previewId, placeholderId) {
            const file = input.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById(previewId).src = e.target.result;
                    document.getElementById(previewId).style.display = 'block';
                    document.getElementById(placeholderId).style.display = 'none';
                };
                reader.readAsDataURL(file);
            }
        }

        // Mostrar formulario de alumno
        function showStudentForm(student = null) {
            document.getElementById('student-form-title').textContent = student ? 'Editar Alumno' : 'Nuevo Alumno';
            document.getElementById('student-form-container').style.display = 'block';
            
            if (student) {
                document.getElementById('student-id').value = student.id;
                document.getElementById('student-name').value = student.name;
                document.getElementById('student-lastname').value = student.lastname;
                document.getElementById('student-email').value = student.email;
                document.getElementById('student-phone').value = student.phone;
                document.getElementById('student-course').value = student.course;
                document.getElementById('student-status').value = student.status;
                document.getElementById('student-address').value = student.address || '';
                document.getElementById('student-enrollment-date').value = student.enrollmentDate || '';
                document.getElementById('student-birthdate').value = student.birthdate || '';
                
                // Mostrar foto si existe
                if (student.photo) {
                    document.getElementById('student-photo-preview').src = student.photo;
                    document.getElementById('student-photo-preview').style.display = 'block';
                    document.getElementById('student-photo-placeholder').style.display = 'none';
                } else {
                    document.getElementById('student-photo-preview').style.display = 'none';
                    document.getElementById('student-photo-placeholder').style.display = 'flex';
                }
            } else {
                document.getElementById('student-form').reset();
                document.getElementById('student-id').value = '';
                document.getElementById('student-photo-preview').style.display = 'none';
                document.getElementById('student-photo-placeholder').style.display = 'flex';
            }
            
            // Desplazar hacia el formulario
            document.getElementById('student-form-container').scrollIntoView({ behavior: 'smooth' });
        }

        // Ocultar formulario de alumno
        function hideStudentForm() {
            document.getElementById('student-form-container').style.display = 'none';
        }

        // Guardar alumno (crear o actualizar)
        function saveStudent() {
            const data = getData();
            const studentId = document.getElementById('student-id').value;
            const photoFile = document.getElementById('student-photo').files[0];
            
            let photoData = null;
            if (photoFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    photoData = e.target.result;
                    completeStudentSave(data, studentId, photoData);
                };
                reader.readAsDataURL(photoFile);
            } else {
                completeStudentSave(data, studentId, null);
            }
        }

        function completeStudentSave(data, studentId, photoData) {
            const studentData = {
                name: document.getElementById('student-name').value,
                lastname: document.getElementById('student-lastname').value,
                email: document.getElementById('student-email').value,
                phone: document.getElementById('student-phone').value,
                course: document.getElementById('student-course').value,
                status: document.getElementById('student-status').value,
                address: document.getElementById('student-address').value,
                enrollmentDate: document.getElementById('student-enrollment-date').value,
                birthdate: document.getElementById('student-birthdate').value,
                photo: photoData
            };
            
            if (studentId) {
                // Actualizar alumno existente
                const index = data.students.findIndex(s => s.id == studentId);
                if (index !== -1) {
                    studentData.id = parseInt(studentId);
                    data.students[index] = studentData;
                    showAlert('Alumno actualizado correctamente', 'success');
                }
            } else {
                // Crear nuevo alumno
                const newId = data.students.length > 0 ? Math.max(...data.students.map(s => s.id)) + 1 : 1;
                studentData.id = newId;
                data.students.push(studentData);
                showAlert('Alumno creado correctamente', 'success');
            }
            
            saveData(data);
            loadStudentsTable();
            hideStudentForm();
        }

        // Cargar tabla de alumnos
        function loadStudentsTable() {
            const data = getData();
            const tbody = document.getElementById('students-table-body');
            tbody.innerHTML = '';
            
            data.students.forEach(student => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        ${student.photo ? 
                            `<img src="${student.photo}" class="photo-preview" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">` : 
                            `<div style="width: 50px; height: 50px; border-radius: 50%; background: #eee; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-user"></i>
                            </div>`
                        }
                    </td>
                    <td>${student.name} ${student.lastname}</td>
                    <td>${student.email}</td>
                    <td>${student.phone}</td>
                    <td>${student.course}</td>
                    <td><span class="status-badge ${getStatusClass(student.status)}">${student.status}</span></td>
                    <td class="actions">
                        <button class="btn btn-primary btn-sm edit-student" data-id="${student.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger btn-sm delete-student" data-id="${student.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Agregar eventos a los botones de editar y eliminar
            document.querySelectorAll('.edit-student').forEach(button => {
                button.addEventListener('click', function() {
                    const studentId = this.getAttribute('data-id');
                    const data = getData();
                    const student = data.students.find(s => s.id == studentId);
                    if (student) {
                        showStudentForm(student);
                    }
                });
            });
            
            document.querySelectorAll('.delete-student').forEach(button => {
                button.addEventListener('click', function() {
                    const studentId = this.getAttribute('data-id');
                    if (confirm('¿Está seguro de que desea eliminar este alumno?')) {
                        deleteStudent(studentId);
                    }
                });
            });
        }

        // Eliminar alumno
        function deleteStudent(id) {
            const data = getData();
            data.students = data.students.filter(s => s.id != id);
            saveData(data);
            loadStudentsTable();
            showAlert('Alumno eliminado correctamente', 'success');
        }

        // Mostrar formulario de pago
        function showPaymentForm(payment = null) {
            document.getElementById('payment-form-title').textContent = payment ? 'Editar Pago' : 'Nuevo Pago';
            document.getElementById('payment-form-container').style.display = 'block';
            
            // Cargar lista de alumnos
            const data = getData();
            const studentSelect = document.getElementById('payment-student');
            studentSelect.innerHTML = '<option value="">Seleccione un alumno</option>';
            data.students.forEach(student => {
                const option = document.createElement('option');
                option.value = student.id;
                option.textContent = `${student.name} ${student.lastname}`;
                studentSelect.appendChild(option);
            });
            
            if (payment) {
                document.getElementById('payment-id').value = payment.id;
                document.getElementById('payment-student').value = payment.studentId;
                document.getElementById('payment-type').value = payment.type;
                document.getElementById('payment-concept').value = payment.concept;
                document.getElementById('payment-month').value = payment.month || '';
                document.getElementById('payment-amount').value = payment.amount;
                document.getElementById('payment-date').value = payment.date;
                document.getElementById('payment-status').value = payment.status;
                document.getElementById('payment-due-date').value = payment.dueDate || '';
                document.getElementById('payment-notes').value = payment.notes || '';
            } else {
                document.getElementById('payment-form').reset();
                document.getElementById('payment-id').value = '';
                document.getElementById('payment-date').value = new Date().toISOString().split('T')[0];
                
                // Establecer el mes actual por defecto para mensualidades
                const currentMonth = new Date().getMonth() + 1;
                document.getElementById('payment-month').value = currentMonth.toString();
            }
            
            // Desplazar hacia el formulario
            document.getElementById('payment-form-container').scrollIntoView({ behavior: 'smooth' });
        }

        // Ocultar formulario de pago
        function hidePaymentForm() {
            document.getElementById('payment-form-container').style.display = 'none';
        }

        // Guardar pago (crear o actualizar)
        function savePayment() {
            const data = getData();
            const paymentId = document.getElementById('payment-id').value;
            
            const paymentData = {
                studentId: parseInt(document.getElementById('payment-student').value),
                type: document.getElementById('payment-type').value,
                concept: document.getElementById('payment-concept').value,
                month: document.getElementById('payment-month').value,
                amount: parseFloat(document.getElementById('payment-amount').value),
                date: document.getElementById('payment-date').value,
                status: document.getElementById('payment-status').value,
                dueDate: document.getElementById('payment-due-date').value,
                notes: document.getElementById('payment-notes').value
            };
            
            if (paymentId) {
                // Actualizar pago existente
                const index = data.payments.findIndex(p => p.id == paymentId);
                if (index !== -1) {
                    paymentData.id = parseInt(paymentId);
                    data.payments[index] = paymentData;
                    showAlert('Pago actualizado correctamente', 'success');
                }
            } else {
                // Crear nuevo pago
                const newId = data.payments.length > 0 ? Math.max(...data.payments.map(p => p.id)) + 1 : 1;
                paymentData.id = newId;
                data.payments.push(paymentData);
                showAlert('Pago creado correctamente', 'success');
            }
            
            saveData(data);
            loadPaymentsTable();
            updatePaymentTotals();
            hidePaymentForm();
        }

        // Cargar tabla de pagos
        function loadPaymentsTable(filteredPayments = null) {
            const data = getData();
            const payments = filteredPayments || data.payments;
            const tbody = document.getElementById('payments-table-body');
            tbody.innerHTML = '';
            
            payments.forEach(payment => {
                const student = data.students.find(s => s.id === payment.studentId);
                const studentName = student ? `${student.name} ${student.lastname}` : 'Alumno no encontrado';
                
                // Obtener nombre del mes
                const monthNames = {
                    '1': 'Enero', '2': 'Febrero', '3': 'Marzo', '4': 'Abril',
                    '5': 'Mayo', '6': 'Junio', '7': 'Julio', '8': 'Agosto',
                    '9': 'Septiembre', '10': 'Octubre', '11': 'Noviembre', '12': 'Diciembre'
                };
                const monthName = payment.month ? monthNames[payment.month] : 'N/A';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${studentName}</td>
                    <td><span class="payment-type-badge ${getPaymentTypeClass(payment.type)}">${payment.type}</span></td>
                    <td>${payment.concept}</td>
                    <td>${monthName}</td>
                    <td>$${payment.amount.toFixed(2)}</td>
                    <td>${formatDate(payment.date)}</td>
                    <td>${payment.dueDate ? formatDate(payment.dueDate) : 'N/A'}</td>
                    <td><span class="status-badge ${getStatusClass(payment.status)}">${payment.status}</span></td>
                    <td class="actions">
                        <button class="btn btn-primary btn-sm edit-payment" data-id="${payment.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger btn-sm delete-payment" data-id="${payment.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Agregar eventos a los botones de editar y eliminar
            document.querySelectorAll('.edit-payment').forEach(button => {
                button.addEventListener('click', function() {
                    const paymentId = this.getAttribute('data-id');
                    const data = getData();
                    const payment = data.payments.find(p => p.id == paymentId);
                    if (payment) {
                        showPaymentForm(payment);
                    }
                });
            });
            
            document.querySelectorAll('.delete-payment').forEach(button => {
                button.addEventListener('click', function() {
                    const paymentId = this.getAttribute('data-id');
                    if (confirm('¿Está seguro de que desea eliminar este pago?')) {
                        deletePayment(paymentId);
                    }
                });
            });
        }

        // Eliminar pago
        function deletePayment(id) {
            const data = getData();
            data.payments = data.payments.filter(p => p.id != id);
            saveData(data);
            loadPaymentsTable();
            updatePaymentTotals();
            showAlert('Pago eliminado correctamente', 'success');
        }

        // Aplicar filtros de pagos
        function applyPaymentFilters() {
            const data = getData();
            const monthFilter = document.getElementById('filter-month').value;
            const typeFilter = document.getElementById('filter-type').value;
            const statusFilter = document.getElementById('filter-status').value;
            
            let filteredPayments = data.payments;
            
            // Aplicar filtros
            if (monthFilter) {
                filteredPayments = filteredPayments.filter(p => p.month === monthFilter);
            }
            
            if (typeFilter) {
                filteredPayments = filteredPayments.filter(p => p.type === typeFilter);
            }
            
            if (statusFilter) {
                filteredPayments = filteredPayments.filter(p => p.status === statusFilter);
            }
            
            // Cargar tabla con pagos filtrados
            loadPaymentsTable(filteredPayments);
            
            // Actualizar totales para los pagos filtrados
            updateFilteredPaymentTotals(filteredPayments);
        }

        // Actualizar totales de pagos
        function updatePaymentTotals() {
            const data = getData();
            updateFilteredPaymentTotals(data.payments);
        }

        // Actualizar totales para pagos filtrados
        function updateFilteredPaymentTotals(payments) {
            let totalGeneral = 0;
            let totalPaid = 0;
            let totalPending = 0;
            let totalOverdue = 0;
            
            payments.forEach(payment => {
                totalGeneral += payment.amount;
                
                if (payment.status === 'Pagado') {
                    totalPaid += payment.amount;
                } else if (payment.status === 'Pendiente') {
                    totalPending += payment.amount;
                } else if (payment.status === 'Vencido') {
                    totalOverdue += payment.amount;
                }
            });
            
            // Actualizar tarjetas de resumen
            document.getElementById('total-general').textContent = `$${totalGeneral.toFixed(2)}`;
            document.getElementById('total-paid').textContent = `$${totalPaid.toFixed(2)}`;
            document.getElementById('total-pending').textContent = `$${totalPending.toFixed(2)}`;
            document.getElementById('total-overdue').textContent = `$${totalOverdue.toFixed(2)}`;
            
            // Actualizar resumen de pagos
            document.getElementById('summary-paid').textContent = `$${totalPaid.toFixed(2)}`;
            document.getElementById('summary-pending').textContent = `$${totalPending.toFixed(2)}`;
            document.getElementById('summary-overdue').textContent = `$${totalOverdue.toFixed(2)}`;
            document.getElementById('summary-total').textContent = `$${totalGeneral.toFixed(2)}`;
        }

        // Mostrar formulario de instructor
        function showInstructorForm(instructor = null) {
            document.getElementById('instructor-form-title').textContent = instructor ? 'Editar Instructor' : 'Nuevo Instructor';
            document.getElementById('instructor-form-container').style.display = 'block';
            
            if (instructor) {
                document.getElementById('instructor-id').value = instructor.id;
                document.getElementById('instructor-name').value = instructor.name;
                document.getElementById('instructor-lastname').value = instructor.lastname;
                document.getElementById('instructor-email').value = instructor.email;
                document.getElementById('instructor-phone').value = instructor.phone;
                document.getElementById('instructor-specialty').value = instructor.specialty;
                document.getElementById('instructor-status').value = instructor.status;
                document.getElementById('instructor-bio').value = instructor.bio || '';
                
                // Mostrar foto si existe
                if (instructor.photo) {
                    document.getElementById('instructor-photo-preview').src = instructor.photo;
                    document.getElementById('instructor-photo-preview').style.display = 'block';
                    document.getElementById('instructor-photo-placeholder').style.display = 'none';
                } else {
                    document.getElementById('instructor-photo-preview').style.display = 'none';
                    document.getElementById('instructor-photo-placeholder').style.display = 'flex';
                }
            } else {
                document.getElementById('instructor-form').reset();
                document.getElementById('instructor-id').value = '';
                document.getElementById('instructor-photo-preview').style.display = 'none';
                document.getElementById('instructor-photo-placeholder').style.display = 'flex';
            }
            
            // Desplazar hacia el formulario
            document.getElementById('instructor-form-container').scrollIntoView({ behavior: 'smooth' });
        }

        // Ocultar formulario de instructor
        function hideInstructorForm() {
            document.getElementById('instructor-form-container').style.display = 'none';
        }

        // Guardar instructor (crear o actualizar)
        function saveInstructor() {
            const data = getData();
            const instructorId = document.getElementById('instructor-id').value;
            const photoFile = document.getElementById('instructor-photo').files[0];
            
            let photoData = null;
            if (photoFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    photoData = e.target.result;
                    completeInstructorSave(data, instructorId, photoData);
                };
                reader.readAsDataURL(photoFile);
            } else {
                completeInstructorSave(data, instructorId, null);
            }
        }

        function completeInstructorSave(data, instructorId, photoData) {
            const instructorData = {
                name: document.getElementById('instructor-name').value,
                lastname: document.getElementById('instructor-lastname').value,
                email: document.getElementById('instructor-email').value,
                phone: document.getElementById('instructor-phone').value,
                specialty: document.getElementById('instructor-specialty').value,
                status: document.getElementById('instructor-status').value,
                bio: document.getElementById('instructor-bio').value,
                photo: photoData
            };
            
            if (instructorId) {
                // Actualizar instructor existente
                const index = data.instructors.findIndex(i => i.id == instructorId);
                if (index !== -1) {
                    instructorData.id = parseInt(instructorId);
                    data.instructors[index] = instructorData;
                    showAlert('Instructor actualizado correctamente', 'success');
                }
            } else {
                // Crear nuevo instructor
                const newId = data.instructors.length > 0 ? Math.max(...data.instructors.map(i => i.id)) + 1 : 1;
                instructorData.id = newId;
                data.instructors.push(instructorData);
                showAlert('Instructor creado correctamente', 'success');
            }
            
            saveData(data);
            loadInstructorsTable();
            hideInstructorForm();
        }

        // Cargar tabla de instructores
        function loadInstructorsTable() {
            const data = getData();
            const tbody = document.getElementById('instructors-table-body');
            tbody.innerHTML = '';
            
            data.instructors.forEach(instructor => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        ${instructor.photo ? 
                            `<img src="${instructor.photo}" class="photo-preview" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">` : 
                            `<div style="width: 50px; height: 50px; border-radius: 50%; background: #eee; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-user-tie"></i>
                            </div>`
                        }
                    </td>
                    <td>${instructor.name} ${instructor.lastname}</td>
                    <td>${instructor.email}</td>
                    <td>${instructor.specialty}</td>
                    <td><span class="status-badge ${getStatusClass(instructor.status)}">${instructor.status}</span></td>
                    <td class="actions">
                        <button class="btn btn-primary btn-sm edit-instructor" data-id="${instructor.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger btn-sm delete-instructor" data-id="${instructor.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Agregar eventos a los botones de editar y eliminar
            document.querySelectorAll('.edit-instructor').forEach(button => {
                button.addEventListener('click', function() {
                    const instructorId = this.getAttribute('data-id');
                    const data = getData();
                    const instructor = data.instructors.find(i => i.id == instructorId);
                    if (instructor) {
                        showInstructorForm(instructor);
                    }
                });
            });
            
            document.querySelectorAll('.delete-instructor').forEach(button => {
                button.addEventListener('click', function() {
                    const instructorId = this.getAttribute('data-id');
                    if (confirm('¿Está seguro de que desea eliminar este instructor?')) {
                        deleteInstructor(instructorId);
                    }
                });
            });
        }

        // Eliminar instructor
        function deleteInstructor(id) {
            const data = getData();
            data.instructors = data.instructors.filter(i => i.id != id);
            saveData(data);
            loadInstructorsTable();
            showAlert('Instructor eliminado correctamente', 'success');
        }

        // Generar reporte
        function generateReport() {
            const reportType = document.getElementById('report-type').value;
            const reportPeriod = document.getElementById('report-period').value;
            const data = getData();
            
            let reportContent = '';
            
            switch (reportType) {
                case 'students':
                    reportContent = generateStudentReport(data, reportPeriod);
                    break;
                case 'payments':
                    reportContent = generatePaymentReport(data, reportPeriod);
                    break;
                case 'instructors':
                    reportContent = generateInstructorReport(data, reportPeriod);
                    break;
            }
            
            document.getElementById('report-results').innerHTML = reportContent;
        }

        // Generar reporte de alumnos
        function generateStudentReport(data, period) {
            let students = data.students;
            
            // Filtrar por período si es necesario
            if (period !== 'all') {
                const now = new Date();
                let startDate;
                
                switch (period) {
                    case 'month':
                        startDate = new Date(now.getFullYear(), now.getMonth(), 1);
                        break;
                    case 'quarter':
                        const quarter = Math.floor(now.getMonth() / 3);
                        startDate = new Date(now.getFullYear(), quarter * 3, 1);
                        break;
                    case 'year':
                        startDate = new Date(now.getFullYear(), 0, 1);
                        break;
                }
                
                students = students.filter(student => {
                    if (!student.enrollmentDate) return false;
                    const enrollmentDate = new Date(student.enrollmentDate);
                    return enrollmentDate >= startDate;
                });
            }
            
            let html = `
                <h3>Reporte de Alumnos</h3>
                <p>Total de alumnos: ${students.length}</p>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Curso</th>
                            <th>Estado</th>
                            <th>Fecha de Inscripción</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            students.forEach(student => {
                html += `
                    <tr>
                        <td>${student.name} ${student.lastname}</td>
                        <td>${student.email}</td>
                        <td>${student.course}</td>
                        <td>${student.status}</td>
                        <td>${formatDate(student.enrollmentDate)}</td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                </table>
            `;
            
            return html;
        }

        // Generar reporte de pagos
        function generatePaymentReport(data, period) {
            let payments = data.payments;
            let totalAmount = 0;
            let paidAmount = 0;
            let pendingAmount = 0;
            let overdueAmount = 0;
            
            // Filtrar por período si es necesario
            if (period !== 'all') {
                const now = new Date();
                let startDate;
                
                switch (period) {
                    case 'month':
                        startDate = new Date(now.getFullYear(), now.getMonth(), 1);
                        break;
                    case 'quarter':
                        const quarter = Math.floor(now.getMonth() / 3);
                        startDate = new Date(now.getFullYear(), quarter * 3, 1);
                        break;
                    case 'year':
                        startDate = new Date(now.getFullYear(), 0, 1);
                        break;
                }
                
                payments = payments.filter(payment => {
                    if (!payment.date) return false;
                    const paymentDate = new Date(payment.date);
                    return paymentDate >= startDate;
                });
            }
            
            payments.forEach(payment => {
                totalAmount += payment.amount;
                if (payment.status === 'Pagado') {
                    paidAmount += payment.amount;
                } else if (payment.status === 'Pendiente') {
                    pendingAmount += payment.amount;
                } else if (payment.status === 'Vencido') {
                    overdueAmount += payment.amount;
                }
            });
            
            let html = `
                <h3>Reporte de Pagos</h3>
                <div class="card" style="margin-bottom: 20px;">
                    <div class="card-header">
                        <h4>Resumen Financiero</h4>
                    </div>
                    <div class="card-body">
                        <p><strong>Total Recaudado:</strong> $${paidAmount.toFixed(2)}</p>
                        <p><strong>Total Pendiente:</strong> $${pendingAmount.toFixed(2)}</p>
                        <p><strong>Total Vencido:</strong> $${overdueAmount.toFixed(2)}</p>
                        <p><strong>Total General:</strong> $${totalAmount.toFixed(2)}</p>
                    </div>
                </div>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Alumno</th>
                            <th>Tipo</th>
                            <th>Concepto</th>
                            <th>Mes</th>
                            <th>Monto</th>
                            <th>Fecha</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            payments.forEach(payment => {
                const student = data.students.find(s => s.id === payment.studentId);
                const studentName = student ? `${student.name} ${student.lastname}` : 'Alumno no encontrado';
                
                // Obtener nombre del mes
                const monthNames = {
                    '1': 'Enero', '2': 'Febrero', '3': 'Marzo', '4': 'Abril',
                    '5': 'Mayo', '6': 'Junio', '7': 'Julio', '8': 'Agosto',
                    '9': 'Septiembre', '10': 'Octubre', '11': 'Noviembre', '12': 'Diciembre'
                };
                const monthName = payment.month ? monthNames[payment.month] : 'N/A';
                
                html += `
                    <tr>
                        <td>${studentName}</td>
                        <td>${payment.type}</td>
                        <td>${payment.concept}</td>
                        <td>${monthName}</td>
                        <td>$${payment.amount.toFixed(2)}</td>
                        <td>${formatDate(payment.date)}</td>
                        <td>${payment.status}</td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                </table>
            `;
            
            return html;
        }

        // Generar reporte de instructores
        function generateInstructorReport(data, period) {
            const instructors = data.instructors;
            
            let html = `
                <h3>Reporte de Instructores</h3>
                <p>Total de instructores: ${instructors.length}</p>
                <table class="table">
                    <thead>
                        <tr>
                            <th>Nombre</th>
                            <th>Email</th>
                            <th>Especialidad</th>
                            <th>Estado</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            instructors.forEach(instructor => {
                html += `
                    <tr>
                        <td>${instructor.name} ${instructor.lastname}</td>
                        <td>${instructor.email}</td>
                        <td>${instructor.specialty}</td>
                        <td>${instructor.status}</td>
                    </tr>
                `;
            });
            
            html += `
                    </tbody>
                </table>
            `;
            
            return html;
        }

        // Funciones de utilidad
        function showAlert(message, type) {
            const alert = document.getElementById(`${type}-alert`);
            const messageElement = document.getElementById(`${type}-message`);
            
            messageElement.textContent = message;
            alert.style.display = 'block';
            
            setTimeout(() => {
                alert.style.display = 'none';
            }, 5000);
        }

        function getStatusClass(status) {
            switch (status) {
                case 'Activo':
                case 'Pagado':
                    return 'status-paid';
                case 'Pendiente':
                    return 'status-pending';
                case 'Inactivo':
                case 'Vencido':
                    return 'status-overdue';
                default:
                    return '';
            }
        }

        function getPaymentTypeClass(type) {
            switch (type) {
                case 'Inscripción':
                    return 'payment-type-inscripcion';
                case 'Mensualidad':
                    return 'payment-type-mensualidad';
                case 'Materiales':
                    return 'payment-type-materiales';
                case 'Otros':
                    return 'payment-type-otros';
                default:
                    return '';
            }
        }

        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            return date.toLocaleDateString('es-ES');
        }

        // Funciones de búsqueda
        function searchStudents() {
            const searchTerm = document.getElementById('student-search').value.toLowerCase();
            const data = getData();
            const filteredStudents = data.students.filter(student => 
                student.name.toLowerCase().includes(searchTerm) ||
                student.lastname.toLowerCase().includes(searchTerm) ||
                student.email.toLowerCase().includes(searchTerm) ||
                student.phone.toLowerCase().includes(searchTerm)
            );
            
            const tbody = document.getElementById('students-table-body');
            tbody.innerHTML = '';
            
            filteredStudents.forEach(student => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        ${student.photo ? 
                            `<img src="${student.photo}" class="photo-preview" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">` : 
                            `<div style="width: 50px; height: 50px; border-radius: 50%; background: #eee; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-user"></i>
                            </div>`
                        }
                    </td>
                    <td>${student.name} ${student.lastname}</td>
                    <td>${student.email}</td>
                    <td>${student.phone}</td>
                    <td>${student.course}</td>
                    <td><span class="status-badge ${getStatusClass(student.status)}">${student.status}</span></td>
                    <td class="actions">
                        <button class="btn btn-primary btn-sm edit-student" data-id="${student.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger btn-sm delete-student" data-id="${student.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Reasignar eventos a los botones de editar y eliminar
            document.querySelectorAll('.edit-student').forEach(button => {
                button.addEventListener('click', function() {
                    const studentId = this.getAttribute('data-id');
                    const data = getData();
                    const student = data.students.find(s => s.id == studentId);
                    if (student) {
                        showStudentForm(student);
                    }
                });
            });
            
            document.querySelectorAll('.delete-student').forEach(button => {
                button.addEventListener('click', function() {
                    const studentId = this.getAttribute('data-id');
                    if (confirm('¿Está seguro de que desea eliminar este alumno?')) {
                        deleteStudent(studentId);
                    }
                });
            });
        }

        function searchPayments() {
            const searchTerm = document.getElementById('payment-search').value.toLowerCase();
            const data = getData();
            const filteredPayments = data.payments.filter(payment => {
                const student = data.students.find(s => s.id === payment.studentId);
                const studentName = student ? `${student.name} ${student.lastname}`.toLowerCase() : '';
                
                return studentName.includes(searchTerm) ||
                       payment.concept.toLowerCase().includes(searchTerm);
            });
            
            const tbody = document.getElementById('payments-table-body');
            tbody.innerHTML = '';
            
            filteredPayments.forEach(payment => {
                const student = data.students.find(s => s.id === payment.studentId);
                const studentName = student ? `${student.name} ${student.lastname}` : 'Alumno no encontrado';
                
                // Obtener nombre del mes
                const monthNames = {
                    '1': 'Enero', '2': 'Febrero', '3': 'Marzo', '4': 'Abril',
                    '5': 'Mayo', '6': 'Junio', '7': 'Julio', '8': 'Agosto',
                    '9': 'Septiembre', '10': 'Octubre', '11': 'Noviembre', '12': 'Diciembre'
                };
                const monthName = payment.month ? monthNames[payment.month] : 'N/A';
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${studentName}</td>
                    <td><span class="payment-type-badge ${getPaymentTypeClass(payment.type)}">${payment.type}</span></td>
                    <td>${payment.concept}</td>
                    <td>${monthName}</td>
                    <td>$${payment.amount.toFixed(2)}</td>
                    <td>${formatDate(payment.date)}</td>
                    <td>${payment.dueDate ? formatDate(payment.dueDate) : 'N/A'}</td>
                    <td><span class="status-badge ${getStatusClass(payment.status)}">${payment.status}</span></td>
                    <td class="actions">
                        <button class="btn btn-primary btn-sm edit-payment" data-id="${payment.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger btn-sm delete-payment" data-id="${payment.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Reasignar eventos a los botones de editar y eliminar
            document.querySelectorAll('.edit-payment').forEach(button => {
                button.addEventListener('click', function() {
                    const paymentId = this.getAttribute('data-id');
                    const data = getData();
                    const payment = data.payments.find(p => p.id == paymentId);
                    if (payment) {
                        showPaymentForm(payment);
                    }
                });
            });
            
            document.querySelectorAll('.delete-payment').forEach(button => {
                button.addEventListener('click', function() {
                    const paymentId = this.getAttribute('data-id');
                    if (confirm('¿Está seguro de que desea eliminar este pago?')) {
                        deletePayment(paymentId);
                    }
                });
            });
            
            // Actualizar totales para los pagos filtrados
            updateFilteredPaymentTotals(filteredPayments);
        }

        function searchInstructors() {
            const searchTerm = document.getElementById('instructor-search').value.toLowerCase();
            const data = getData();
            const filteredInstructors = data.instructors.filter(instructor => 
                instructor.name.toLowerCase().includes(searchTerm) ||
                instructor.lastname.toLowerCase().includes(searchTerm) ||
                instructor.email.toLowerCase().includes(searchTerm) ||
                instructor.specialty.toLowerCase().includes(searchTerm)
            );
            
            const tbody = document.getElementById('instructors-table-body');
            tbody.innerHTML = '';
            
            filteredInstructors.forEach(instructor => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>
                        ${instructor.photo ? 
                            `<img src="${instructor.photo}" class="photo-preview" style="width: 50px; height: 50px; border-radius: 50%; object-fit: cover;">` : 
                            `<div style="width: 50px; height: 50px; border-radius: 50%; background: #eee; display: flex; align-items: center; justify-content: center;">
                                <i class="fas fa-user-tie"></i>
                            </div>`
                        }
                    </td>
                    <td>${instructor.name} ${instructor.lastname}</td>
                    <td>${instructor.email}</td>
                    <td>${instructor.specialty}</td>
                    <td><span class="status-badge ${getStatusClass(instructor.status)}">${instructor.status}</span></td>
                    <td class="actions">
                        <button class="btn btn-primary btn-sm edit-instructor" data-id="${instructor.id}">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-danger btn-sm delete-instructor" data-id="${instructor.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(row);
            });
            
            // Reasignar eventos a los botones de editar y eliminar
            document.querySelectorAll('.edit-instructor').forEach(button => {
                button.addEventListener('click', function() {
                    const instructorId = this.getAttribute('data-id');
                    const data = getData();
                    const instructor = data.instructors.find(i => i.id == instructorId);
                    if (instructor) {
                        showInstructorForm(instructor);
                    }
                });
            });
            
            document.querySelectorAll('.delete-instructor').forEach(button => {
                button.addEventListener('click', function() {
                    const instructorId = this.getAttribute('data-id');
                    if (confirm('¿Está seguro de que desea eliminar este instructor?')) {
                        deleteInstructor(instructorId);
                    }
                });
            });
        }
    </script>
</body>
</html>